{"version":3,"file":"DevMenuView.js","sourceRoot":"","sources":["../../../src/app/views/DevMenuView.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Clipboard, StyleSheet, PixelRatio } from 'react-native';\n\nimport DevMenuContext, { Context } from '../DevMenuContext';\nimport DevMenuInternal, { DevMenuItemAnyType, DevMenuItemEnum } from '../DevMenuInternal';\nimport { StyledView } from '../components/Views';\nimport Colors from '../constants/Colors';\n// import DevMenuCloseButton from './DevMenuCloseButton';\nimport DevMenuItemsList from './DevMenuItemsList';\nimport * as DevMenu from './DevMenuModule';\nimport DevMenuOnboarding from './DevMenuOnboarding';\nimport DevMenuTaskInfo from './DevMenuTaskInfo';\n\ntype Props = {\n  appInfo: { [key: string]: any };\n  uuid: string;\n  devMenuItems: DevMenuItemAnyType[];\n  enableDevelopmentTools: boolean;\n  showOnboardingView: boolean;\n};\n\ntype State = {\n  isOnboardingFinished: boolean;\n};\n\nclass DevMenuView extends React.PureComponent<Props, State> {\n  static contextType = DevMenuContext;\n\n  context!: Context;\n\n  constructor(props: Props, context: Context) {\n    super(props, context);\n\n    this.state = {\n      isOnboardingFinished: !props.showOnboardingView,\n    };\n  }\n\n  collapse = async () => {\n    await this.context?.collapse?.();\n  };\n\n  collapseAndCloseDevMenuAsync = async () => {\n    await this.collapse();\n    await DevMenuInternal.closeMenuAsync();\n  };\n\n  onAppReload = () => {\n    this.collapse();\n    DevMenu.reloadAppAsync();\n  };\n\n  onCopyTaskUrl = async () => {\n    const { manifestUrl } = this.props.appInfo;\n\n    await this.collapseAndCloseDevMenuAsync();\n    Clipboard.setString(manifestUrl);\n    alert(`Copied \"${manifestUrl}\" to the clipboard!`);\n  };\n\n  onGoToHome = () => {\n    this.collapse();\n    DevMenu.goToHomeAsync();\n  };\n\n  onPressDevMenuButton = key => {\n    DevMenu.selectItemWithKeyAsync(key);\n  };\n\n  onOnboardingFinished = () => {\n    DevMenu.setOnboardingFinishedAsync(true);\n    this.setState({ isOnboardingFinished: true });\n  };\n\n  renderItems() {\n    const { appInfo } = this.props;\n    const items: DevMenuItemAnyType[] = [];\n\n    items.push({\n      type: DevMenuItemEnum.ACTION,\n      isAvailable: true,\n      isEnabled: true,\n      label: 'Reload',\n      actionId: 'reload',\n      glyphName: 'reload',\n    });\n\n    if (appInfo && appInfo.manifestUrl) {\n      items.push({\n        type: DevMenuItemEnum.ACTION,\n        isAvailable: true,\n        isEnabled: true,\n        label: 'Copy link to clipboard',\n        actionId: 'copy',\n        glyphName: 'clipboard-text',\n      });\n    }\n\n    items.push({\n      type: DevMenuItemEnum.ACTION,\n      isAvailable: true,\n      isEnabled: true,\n      label: 'Go to Home',\n      actionId: 'home',\n      glyphName: 'home',\n    });\n\n    if (this.props.enableDevelopmentTools && this.props.devMenuItems) {\n      items.push(...this.props.devMenuItems);\n    }\n    return <DevMenuItemsList items={items} />;\n  }\n\n  renderContent() {\n    const { appInfo } = this.props;\n    const { isOnboardingFinished } = this.state;\n\n    return (\n      <>\n        {!isOnboardingFinished && <DevMenuOnboarding onClose={this.onOnboardingFinished} />}\n\n        <StyledView\n          style={styles.appInfo}\n          lightBackgroundColor={Colors.light.menuAppInfoBackground}\n          lightBorderColor={Colors.light.menuAppInfoBorder}\n          darkBackgroundColor={Colors.dark.menuAppInfoBackground}\n          darkBorderColor={Colors.dark.menuAppInfoBorder}>\n          <DevMenuTaskInfo task={appInfo} />\n        </StyledView>\n\n        <StyledView\n          style={styles.itemsContainer}\n          lightBackgroundColor={Colors.light.menuBackground}\n          darkBackgroundColor={Colors.dark.menuBackground}>\n          {this.renderItems()}\n        </StyledView>\n\n        {/* <DevMenuCloseButton\n          style={styles.closeButton}\n          onPress={this.collapseAndCloseDevMenuAsync}\n        /> */}\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <StyledView\n        style={styles.container}\n        lightBackgroundColor={Colors.light.menuBackground}\n        lightBorderColor={Colors.light.menuItemBorderColor}\n        darkBackgroundColor={Colors.dark.menuBackground}\n        darkBorderColor={Colors.dark.menuItemBorderColor}>\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n        {this.renderContent()}\n      </StyledView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  appInfo: {\n    borderBottomWidth: 1 / PixelRatio.get(),\n  },\n  itemsContainer: {\n    paddingTop: 6,\n  },\n  closeButton: {\n    position: 'absolute',\n    right: 12,\n    top: 12,\n    zIndex: 3, // should be higher than zIndex of onboarding container\n  },\n});\n\nexport default DevMenuView;\n"]}